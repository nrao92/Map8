<!DOCTYPE html>
<html>
    <head>
        <title>Lab 8 - Hexabins </title>

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin=""/>
        <link href='https://fonts.googleapis.com/css?family=Acme' rel='stylesheet'>

        <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
        integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
        crossorigin=""></script>

        <script src="ChiCrime.js"></script>

        <style type="text/css">
          html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            }

          #map {
            min-height: 100%;
            }

          .title {
              padding: 6px 8px;
              font-family: 'Cambria';font-size: 22px;
              background: white;
              background: rgba(255,255,255,0.8);
              box-shadow: 0 0 15px rgba(0,0,0,0.2);
              border-radius: 5px;
          }

        </style>
        
        <link rel="icon" href="favicon.png" > 

    </head>

    <body>
        <div id="map" style="height: 500px"></div>
        
        <script type="text/javascript">

            var map = L.map('map', {
              center: [41.8303224,-87.7580872],
              zoom: 10
            });

           L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
    maxZoom: 15
               //L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                //attribution: 'Map data © OpenStreetMap contributors, CC-BY-SA, Imagery © Mapbox',
                //maxZoom: 15,
                //minZoom: 10,
                //id: 'mapbox.light',
                //accessToken: 'pk.eyJ1IjoibnJhbzQiLCJhIjoiY2pseG1qZDd1MGEzbTNrcWRkdnp6cjR2NyJ9.jCgMDfT3qtoxUfAu6ph1Ag'
            }).addTo(map);

             function getColor(value) {
                return value < 45 ? '#ffffff':
                       value < 109 ? '#ffbfbf':
                       value < 199 ? '#ff8080':
                       value < 325 ? '#ff4040':
                       value < 621 ? '#ff0000':
                      // value < 5.82 ? '#252525':
                                      '#ff0000';}

            function style(feature){
                return {
                    fillColor: getColor(feature.properties.NUMPOINTS),   // pop_den is the field name for the population density data
                    weight: 1,
                    opacity:1,
                    color: 'black',
                    fillOpacity: 1
                
                };
            }
            
      //geoJSON for data
         L.geoJson(Chidata, {style:style}).addTo(map);

            
      //Title      
        var title = L.control({position: 'topright'}); // position of the title

            title.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'title'); // create a div with a class "title"
            this._div.innerHTML = "<h3>Hexabin Map of Violent Crimes in Chicago, Illinois</h3>";  // Title text, may use html to customize
            return this._div;
            };

                title.addTo(map);
            
        </script>
   </body>
</html>
